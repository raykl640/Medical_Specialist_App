<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Welcome to MedConnect</title>
  <link rel="stylesheet" href="css/styles.css" />
   
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(to right, #e0f7fa, #ffffff);
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 40px 20px;
      text-align: center;
    }

    h1 {
      font-size: 2.8rem;
      margin-bottom: 1rem;
      color: #00796b;
    }

    p.intro {
      font-size: 1.2rem;
      max-width: 700px;
      margin-bottom: 2.5rem;
      color: #555;
    }

    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      max-width: 1000px;
      width: 100%;
    }

    .feature {
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      padding: 25px;
      transition: transform 0.2s ease-in-out;
    }

    .feature:hover {
      transform: translateY(-5px);
    }

    .feature h3 {
      margin-bottom: 10px;
      color: #00695c;
    }

    .feature p {
      font-size: 0.95rem;
      color: #666;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 2rem;
      }

      .features {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
    </div>

    <!-- Main App Content -->
    <div class="main-app" id="mainApp">
        <!-- Title Bar -->
        <div class="title-bar">
            <div class="hamburger-menu" onclick="toggleSidebar()">
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
            </div>
            <div class="notifications">
                <span class="notification-icon">🔔</span>
            </div>
        </div>
        
        <!-- Overlay for mobile -->
        <div class="overlay" id="overlay" onclick="closeSidebar()"></div>
        
        <!-- Navigation Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="logo">
                <div class="logo-circle">
                    <div class="profile-picture" id="userInitial">
                        U
                    </div>
                </div>
            </div>
            <div class="nav-section">
                <h3>Dashboard</h3>
                <ul>
                    <li><a href="patientDashboard.html" class="nav-link active" onclick="loadPage('dashboard')"><span class="icon">🏠</span> Home</a></li>
                    <li><a href="appointments.html" class="nav-link" onclick="loadPage('appointments')"><span class="icon">📅</span> My Appointments</a></li>
                    <li><a href="clinics.html" class="nav-link" onclick="loadPage('clinics')"><span class="icon">🏥</span> Clinics</a></li>
                    <li><a href="healthResources.html" class="nav-link" onclick="loadPage('health-resources')"><span class="icon">📚</span> Health Resources</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3>Medical</h3>
                <ul>
                    <li><a href="medicalHistory.html" class="nav-link" onclick="loadPage('medical-history')"><span class="icon">📋</span> Medical History</a></li>
                    <li><a href="labTests.html" class="nav-link" onclick="loadPage('lab-tests')"><span class="icon">🧪</span> Lab Tests</a></li>
                    <li><a href="radiology.html" class="nav-link" onclick="loadPage('radiology')"><span class="icon">💎</span> Radiology</a></li>
                    <li><a href="prescriptions.html" class="nav-link" onclick="loadPage('prescriptions')"><span class="icon">💊</span> Prescriptions</a></li>
                </ul>
            </div>
            <div class="nav-section nav-bottom">
                <ul>
                    <li><a href="profile.html" class="nav-link" onclick="loadPage('profile')"><span class="icon">👤</span> Profile</a></li>
                    <li><a href="#" class="nav-link" onclick="logout()"><span class="icon">🚪</span> Log Out</a></li>
                </ul>
            </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="main-content" id="mainContent">
            <div id="page-content">
                <div class="welcome-section">
                    <h1>Welcome to Your Medical Dashboard</h1>
                    <p>Access all your medical information, appointments, and health resources in one convenient location. Use the navigation menu to explore different sections of your healthcare portal.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Wait for Firebase to be loaded before checking auth
        window.addEventListener('load', function() {
            if (window.firebaseAuth) {
                // Import onAuthStateChanged dynamically
                import('https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js')
                    .then(({ onAuthStateChanged }) => {
                        // Check authentication state when page loads
                        onAuthStateChanged(window.firebaseAuth, function(user) {
                            // Skip auth state change if we're in the middle of logging out
                            if (isLoggingOut) return;
                            
                            const loadingScreen = document.getElementById('loadingScreen');
                            const mainApp = document.getElementById('mainApp');
                            
                            if (user) {
                                // User is signed in - show main app
                                console.log('User is authenticated:', user.email);
                                loadAuthenticatedContent(user);
                                
                                // Hide loading screen and show main app
                                loadingScreen.style.display = 'none';
                                mainApp.style.display = 'block';
                            } else {
                                // No user - redirect to login (only if not already logging out)
                                if (!isLoggingOut) {
                                    console.log('User not authenticated, redirecting to login');
                                    try {
                                        window.location.replace('./login.html');
                                    } catch (e) {
                                        console.log('Replace failed, trying href');
                                        window.location.href = './login.html';
                                    }
                                }
                            }
                        });
                    });
            }
        });

        function loadAuthenticatedContent(user) {
            // Update user initial in profile picture
            const userInitial = document.getElementById('userInitial');
            if (user.displayName) {
                userInitial.textContent = user.displayName.charAt(0).toUpperCase();
            } else if (user.email) {
                userInitial.textContent = user.email.charAt(0).toUpperCase();
            }
            
            // You can add more user-specific content loading here
            console.log('Loading authenticated content for:', user.email);
        }
        
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const overlay = document.getElementById('overlay');
            
            sidebar.classList.toggle('open');
            
            // On desktop, shift main content; on mobile, show overlay
            if (window.innerWidth > 768) {
                mainContent.classList.toggle('shifted');
            } else {
                overlay.classList.toggle('show');
            }
        }
        
        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const overlay = document.getElementById('overlay');
            
            sidebar.classList.remove('open');
            mainContent.classList.remove('shifted');
            overlay.classList.remove('show');
        }
        
        function loadPage(page) {
            // Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Add active class to clicked link
            event.target.closest('.nav-link').classList.add('active');
            
            // Simple page content switching
            const pageContent = document.getElementById('page-content');
            const pages = {
                'dashboard': `
                    
  <h1>Welcome to MedConnect</h1>
  <p class="intro">
    Your trusted platform to find medical specialists, access personal health records, and explore health education resources — all in one secure place.
  </p>

  <div class="features">
    <div class="feature">
      <h3>🩺 Find Specialists</h3>
      <p>Search for top-rated medical specialists by name, expertise, or location.</p>
    </div>

    <div class="feature">
      <h3>📄 View Medical Records</h3>
      <p>Access and review your personal medical history securely and instantly.</p>
    </div>

    <div class="feature">
      <h3>📚 Health Resources</h3>
      <p>Read trusted articles, guides, and tips to better manage your health.</p>
    </div>

    <div class="feature">
      <h3>🔐 Secure Login</h3>
      <p>Protected access through secure Firebase Authentication.</p>
    </div>
  </div>

 <script type="module" src="js/navigation.js"></script>

</body>
</html>